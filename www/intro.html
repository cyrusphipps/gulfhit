<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@700;800&display=swap" rel="stylesheet">
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background: #e9f3ff;
      overflow: hidden;
    }
    canvas { display: block; }
  </style>
</head>
<body>

<canvas id="c"></canvas>

<script>
/* =========================
   Canvas
========================= */
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");

function resize() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
window.addEventListener("resize", resize);
resize();

/* =========================
   Assets
========================= */
const cardImg = new Image();
cardImg.crossOrigin = "anonymous";
cardImg.src =
  "https://images.unsplash.com/photo-1527118732049-c88155f2107c?w=500&auto=format&fit=crop&q=60";

/* =========================
   Cards
========================= */
const CARD_W = 138;
const CARD_H = 184;
const CARD_RADIUS = 24;
const CARD_THICKNESS = 6; // >=5px, visibly chunky

const CARD_COUNT = 23;
const FLIP_COUNT = 6;

const cards = [];
const directions = ["E","W","N","S"];
const backColors = ["#ffd166", "#06d6a0", "#ef476f", "#118ab2"];

const flipping = new Set();
while (flipping.size < FLIP_COUNT) {
  flipping.add(Math.floor(Math.random() * CARD_COUNT));
}

for (let i = 0; i < CARD_COUNT; i++) {
  const dir = directions[Math.floor(Math.random() * directions.length)];
  const baseSpeed = 30 + Math.random() * 20;
  const speed = baseSpeed * 1.1;

  cards.push({
    x: Math.random() * canvas.width,
    y: Math.random() * canvas.height,
    vx: dir === "E" ? speed : dir === "W" ? -speed : 0,
    vy: dir === "S" ? speed : dir === "N" ? -speed : 0,
    rot: (Math.random() - 0.5) * 0.15,

    canFlip: flipping.has(i),
    flipPhase: Math.random() * Math.PI * 2,
    flipSpeed: 1.0 + Math.random() * 0.6,
    backColor: backColors[i % backColors.length]
  });
}

/* =========================
   Helpers
========================= */
function roundRect(x, y, w, h, r) {
  ctx.beginPath();
  ctx.moveTo(x + r, y);
  ctx.arcTo(x + w, y, x + w, y + h, r);
  ctx.arcTo(x + w, y + h, x, y + h, r);
  ctx.arcTo(x, y + h, x, y, r);
  ctx.arcTo(x, y, x + w, y, r);
  ctx.closePath();
}

function textHeight(text, font) {
  ctx.font = font;
  const m = ctx.measureText(text);
  return (m.actualBoundingBoxAscent || 0) +
         (m.actualBoundingBoxDescent || 0);
}

/* =========================
   Loop
========================= */
let last = performance.now();
let shimmerAngle = 0;

function loop(t) {
  const dt = (t - last) / 1000;
  last = t;

  shimmerAngle += dt * 1.2; // smooth rotation, no jump

  ctx.clearRect(0, 0, canvas.width, canvas.height);

  /* =========================
     Animated Cards
  ========================= */
  for (const c of cards) {
    c.x += c.vx * dt;
    c.y += c.vy * dt;

    if (c.x > canvas.width + CARD_W) c.x = -CARD_W;
    if (c.x < -CARD_W) c.x = canvas.width + CARD_W;
    if (c.y > canvas.height + CARD_H) c.y = -CARD_H;
    if (c.y < -CARD_H) c.y = canvas.height + CARD_H;

    let flip = 1;
    if (c.canFlip) {
      c.flipPhase += dt * c.flipSpeed;
      flip = Math.cos(c.flipPhase);
    }

    ctx.save();
    ctx.translate(c.x + CARD_W / 2, c.y + CARD_H / 2);
    ctx.rotate(c.rot);

    const absFlip = Math.abs(flip);

    // visible thickness over a wider angle
    if (absFlip < 0.45) {
      const edgeGrad = ctx.createLinearGradient(
        -CARD_THICKNESS / 2, 0,
         CARD_THICKNESS / 2, 0
      );
      edgeGrad.addColorStop(0, "#b0b0b0");
      edgeGrad.addColorStop(0.5, "#e0e0e0");
      edgeGrad.addColorStop(1, "#b0b0b0");

      ctx.fillStyle = edgeGrad;
      ctx.fillRect(
        -CARD_THICKNESS / 2,
        -CARD_H / 2,
        CARD_THICKNESS,
        CARD_H
      );
    }

    ctx.scale(flip, 1);
    roundRect(-CARD_W/2, -CARD_H/2, CARD_W, CARD_H, CARD_RADIUS);
    ctx.clip();

    if (flip >= 0) {
      ctx.drawImage(cardImg, -CARD_W/2, -CARD_H/2, CARD_W, CARD_H);
    } else {
      ctx.fillStyle = c.backColor;
      ctx.fillRect(-CARD_W/2, -CARD_H/2, CARD_W, CARD_H);
    }

    ctx.restore();
  }

  /* =========================
     Title Card
  ========================= */
  const titleW = canvas.width * 0.5775;
  const titleH = Math.min(420, canvas.height * 0.45);
  const titleX = (canvas.width - titleW) / 2;
  const titleY = canvas.height * 0.12;

  ctx.fillStyle = "#2f3a5f";
  roundRect(titleX, titleY, titleW, titleH, 40);
  ctx.fill();

  ctx.strokeStyle = "rgba(255,255,255,0.25)";
  ctx.lineWidth = 4;
  roundRect(titleX + 6, titleY + 6, titleW - 12, titleH - 12, 34);
  ctx.stroke();

  /* =========================
     Title Text
  ========================= */
  ctx.textAlign = "center";
  ctx.textBaseline = "top";

  const discoveryFont = `800 ${Math.min(120, titleW * 0.17)}px 'Baloo 2'`;
  const animalsFont   = `800 ${Math.min(140, titleW * 0.2)}px 'Baloo 2'`;

  const dH = textHeight("Discovery", discoveryFont);
  const aH = textHeight("Animals", animalsFont);
  const middleGap = 34;
  const pad = (titleH - dH - aH - middleGap) / 2;

  const discoveryTop = titleY + pad;
  const animalsTop   = discoveryTop + dH + middleGap;

  ctx.fillStyle = "rgba(0,0,0,0.45)";
  ctx.font = discoveryFont;
  ctx.fillText("Discovery", canvas.width/2 + 4, discoveryTop + 6);
  ctx.font = animalsFont;
  ctx.fillText("Animals", canvas.width/2 + 4, animalsTop + 6);

  ctx.fillStyle = "#fff";
  ctx.font = discoveryFont;
  ctx.fillText("Discovery", canvas.width/2, discoveryTop);
  ctx.font = animalsFont;
  ctx.fillText("Animals", canvas.width/2, animalsTop);

  /* =========================
     Play Button (smooth shimmer)
  ========================= */
  const btnW = Math.min(280, canvas.width * 0.4);
  const btnH = 84;
  const btnX = canvas.width / 2 - btnW / 2;
  const btnY = titleY + titleH + 80;

  const baseGrad = ctx.createLinearGradient(btnX, btnY, btnX, btnY + btnH);
  baseGrad.addColorStop(0, "#ffffff");
  baseGrad.addColorStop(1, "#bfbfbf");

  ctx.fillStyle = baseGrad;
  roundRect(btnX, btnY, btnW, btnH, 28);
  ctx.fill();

  // smooth rotating shimmer (no reset)
  const shimmerPos = (Math.cos(shimmerAngle) * 0.5 + 0.5) * (btnW + 160) - 80;

  const shimmerGrad = ctx.createLinearGradient(
    btnX + shimmerPos - 80, btnY,
    btnX + shimmerPos + 80, btnY + btnH
  );
  shimmerGrad.addColorStop(0, "rgba(255,255,255,0)");
  shimmerGrad.addColorStop(0.45, "rgba(255,255,255,0.95)");
  shimmerGrad.addColorStop(0.55, "rgba(255,255,255,0.95)");
  shimmerGrad.addColorStop(1, "rgba(255,255,255,0)");

  ctx.fillStyle = shimmerGrad;
  roundRect(btnX, btnY, btnW, btnH, 28);
  ctx.fill();

  ctx.fillStyle = "#333";
  ctx.font = "800 36px 'Baloo 2'";
  ctx.textBaseline = "middle";
  ctx.textAlign = "center";
  ctx.fillText("PLAY", canvas.width / 2, btnY + btnH / 2);

  /* =========================
     Studio credit
  ========================= */
  ctx.fillStyle = "rgba(0,0,0,0.45)";
  ctx.font = "700 16px 'Baloo 2'";
  ctx.textBaseline = "top";
  ctx.fillText("By Early Jumpers Studio", canvas.width / 2, btnY + btnH + 16);

  requestAnimationFrame(loop);
}

requestAnimationFrame(loop);
</script>

</body>
</html>
